{"singlePage": [], "startSite": "", "filingNum": "", "onePageListNum": 15, "commentLabelColor": "#006b75", "yearColorList": ["#bc4c00", "#0969da", "#1f883d", "#A333D0"], "i18n": "CN", "themeMode": "manual", "dayTheme": "light", "nightTheme": "dark", "urlMode": "pinyin", "script": "", "style": "", "head": "", "indexScript": "", "indexStyle": "", "bottomText": "", "showPostSource": 1, "iconList": {}, "UTC": 8, "rssSplit": "sentence", "exlink": {}, "needComment": 1, "allHead": "", "title": "Jianlun's blog", "subTitle": "\u68a6\u5170\u7684\u535a\u5ba2", "avatarUrl": "https://avatars.githubusercontent.com/u/157687961?v=4&size=64", "GMEEK_VERSION": "last", "postListJson": {"P1": {"htmlDir": "docs/post/zhe-shi-di-yi-ge-bo-ke-nei-rong.html", "labels": ["documentation"], "postTitle": "\u8fd9\u662f\u7b2c\u4e00\u4e2a\u535a\u5ba2\u5185\u5bb9", "postUrl": "post/zhe-shi-di-yi-ge-bo-ke-nei-rong.html", "postSourceUrl": "https://github.com/Jian-lun/Jian-lun.github.io/issues/1", "commentNum": 0, "wordCount": 14, "description": "\u7b2c\u4e00\u4e2a\u5185\u5bb9 :\u4ec5\u4ec5\u505a\u4e00\u4e2a\u6d4b\u8bd5\u3002", "top": 0, "createdAt": 1722572280, "style": "", "script": "", "head": "", "ogImage": "https://avatars.githubusercontent.com/u/157687961?v=4&size=64", "createdDate": "2024-08-02", "dateLabelColor": "#bc4c00"}, "P2": {"htmlDir": "docs/post/an-zhuo-kai-fa- -fang-yi-jian-qu-chu-qian-ming-xiao-yan.html", "labels": ["Java\u4ee3\u7801", "\u5b89\u5353\u5f00\u53d1"], "postTitle": "\u5b89\u5353\u5f00\u53d1 \u9632\u4e00\u952e\u53bb\u9664\u7b7e\u540d\u6821\u9a8c", "postUrl": "post/an-zhuo-kai-fa-%20-fang-yi-jian-qu-chu-qian-ming-xiao-yan.html", "postSourceUrl": "https://github.com/Jian-lun/Jian-lun.github.io/issues/2", "commentNum": 0, "wordCount": 3401, "description": "```java\r\n\r\nimport android.annotation.*;\r\nimport android.app.*;\r\nimport android.content.*;\r\nimport android.content.pm.*;\r\nimport android.icu.text.*;\r\nimport android.os.*;\r\nimport android.util.*;\r\nimport android.widget.*;\r\nimport java.io.*;\r\nimport java.security.*;\r\nimport java.util.*;\r\nimport java.lang.Process;\r\nimport java.util.Base64;\r\n\r\npublic class MainActivity extends Activity {\r\n//MD5\u8fdb\u884c\u4e86Base64\u7f16\u7801\r\n    private static final String BASE64_SIGNATURE = 'NTkzNTQ3MTU0YjdlNzU0ZGMyZTRmNGVlYWNjZDQ1ODU=';\r\n\r\n    @Override\r\n   \r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        \r\n\r\n        if (!verifyAppSignature(this)) {\r\n            \r\n            finish();\r\n        } else {\r\n           \r\n        }\r\n    }\r\n\r\n    private boolean verifyAppSignature(Context context) {\r\n        String text;\r\n        String packageName = context.getPackageName();\r\n        try {\r\n            BufferedReader br = new BufferedReader(new FileReader('/proc/self/maps'));\r\n            String apkPath = '';\r\n            while ((text = br.readLine()) != null) {\r\n                for (String str : text.split('\\\\s+')) {\r\n                    if (str.startsWith('/data/app/')\r\n                                                && str.endsWith('/base.apk')\r\n                                                && str.contains(packageName)) {\r\n                        apkPath = str;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (apkPath.isEmpty()) {\r\n                return false;\r\n            }\r\n\r\n            File apkFile = new File(apkPath);\r\n            long apkTimestamp = apkFile.lastModified();\r\n\r\n            \r\n            ApplicationInfo appInfo = context.getApplicationInfo();\r\n            File appFile = new File(appInfo.sourceDir);\r\n            long sourceTimestamp = appFile.lastModified();\r\n\r\n            if (sourceTimestamp != apkTimestamp) {\r\n                return false;\r\n            }\r\n}\r\n\r\n            File file = new File(context.getDir('hcc', 0), 'hc');\r\n            if (file.exists()) {\r\n                file.delete();\r\n            }\r\n            String destinationPath = file.getAbsolutePath();\r\n\r\n            Runtime.getRuntime().exec('cp ' + apkPath + ' ' + destinationPath).waitFor();\r\n\r\n            byte[] bytes = context.getPackageManager().getPackageArchiveInfo(destinationPath, 64).signatures[0].toByteArray();\r\n            if (bytes == null) {\r\n                return false;\r\n            }\r\n\r\n            MessageDigest md = MessageDigest.getInstance('MD5');\r\n            byte[] digest = md.digest(bytes);\r\n            StringBuilder hexString = new StringBuilder();\r\n            for (byte b : digest) {\r\n                String hex = Integer.toHexString(0xff & b);\r\n                if (hex.length() == 1) {\r\n                    hexString.append('0');\r\n                }\r\n                hexString.append(hex);\r\n            }\r\n\r\n            String calculatedSignature = hexString.toString();\r\n            String expectedSignature = new String(Base64.getDecoder().decode(BASE64_SIGNATURE));\r\n            return calculatedSignature.equals(expectedSignature);\r\n        } catch (Exception e) {\r\n            return false;\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nif (!verifyAppSignature(this)) {\r\n    finish();\r\n}\r\n// \u8fd9\u91cc\u662f\u76f4\u63a5\u653e\u5230onCreate\u65b9\u6cd5\u91cc\u4e86\u8fd4\u56detrue\u6216false\r\n\r\nelse {\r\n    // \u8fd9\u91cc\u53ef\u4ee5\u653e\u7f6e\u9a8c\u8bc1\u901a\u8fc7\u540e\u9700\u8981\u6267\u884c\u7684\u4ee3\u7801\r\n}\r\n```\u3002", "top": 0, "createdAt": 1725202017, "style": "", "script": "", "head": "", "ogImage": "https://avatars.githubusercontent.com/u/157687961?v=4&size=64", "createdDate": "2024-09-01", "dateLabelColor": "#bc4c00"}}, "singeListJson": {}, "labelColorDict": {"bug": "#d73a4a", "documentation": "#0075ca", "duplicate": "#cfd3d7", "enhancement": "#a2eeef", "good first issue": "#7057ff", "help wanted": "#008672", "invalid": "#e4e669", "Java\u4ee3\u7801": "#006b75", "question": "#d876e3", "wontfix": "#ffffff", "\u5b89\u5353\u5f00\u53d1": "#91EC51"}, "displayTitle": "Jianlun's blog", "faviconUrl": "https://avatars.githubusercontent.com/u/157687961?v=4&size=64", "ogImage": "https://avatars.githubusercontent.com/u/157687961?v=4&size=64", "primerCSS": "<link href='https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/Primer/21.0.7/primer.css' rel='stylesheet' />", "homeUrl": "https://Jian-lun.github.io", "prevUrl": "disabled", "nextUrl": "disabled"}